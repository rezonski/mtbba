(function(factory){if(typeof module==='object'&&module.exports){module.exports=factory}else{factory(Highcharts)}}(function(H){var each=H.each,seriesTypes=H.seriesTypes,pick=H.pick,UNDEFINED,NORMAL_STATE='',VISIBLE='visible',HIDDEN='hidden',PREFIX='highcharts-',NONE='none',hasTouch=document.documentElement.ontouchstart!==UNDEFINED,TRACKER_FILL='rgba(192,192,192,'+(H.hasSVG?0.0001:0.002)+')',M='M',L='L';function error(code,stop){var msg='Highcharts error #'+code+': www.highcharts.com/errors/'+code;if(stop){throw msg}else if(window.console){console.log(msg)}}
function getPath(arr){var ret=[];each(arr,function(el){ret=ret.concat(el[0])});return ret}
H.Series.prototype.getSegmentPath=function(segment){var series=this,segmentPath=[],step=series.options.step;each(segment,function(point,i){var plotX=point.plotX,plotY=point.plotY,lastPoint;if(series.getPointSpline){segmentPath.push.apply(segmentPath,series.getPointSpline(segment,point,i))}else{segmentPath.push(i?L:M);if(step&&i){lastPoint=segment[i-1];if(step==='right'){segmentPath.push(lastPoint.plotX,plotY,L)}else if(step==='center'){segmentPath.push((lastPoint.plotX+plotX)/2,lastPoint.plotY,L,(lastPoint.plotX+plotX)/2,plotY,L)}else{segmentPath.push(plotX,lastPoint.plotY,L)}}
segmentPath.push(point.plotX,point.plotY)}});return segmentPath};seriesTypes.coloredline=H.extendClass(seriesTypes.line);H.seriesTypes.coloredline.prototype.processData=function(force){var series=this,processedXData=series.xData,processedYData=series.yData,cropStart=0,cropped,distance,closestPointRange,xAxis=series.xAxis,i,options=series.options,isCartesian=series.isCartesian;if(isCartesian&&!series.isDirty&&!xAxis.isDirty&&!series.yAxis.isDirty&&!force){return!1}
for(i=processedXData.length-1;i>=0;i--){distance=processedXData[i]-processedXData[i-1];if(distance>0&&(closestPointRange===UNDEFINED||distance<closestPointRange)){closestPointRange=distance}else if(distance<0&&series.requireSorting){error(15)}}
series.cropped=cropped;series.cropStart=cropStart;series.processedXData=processedXData;series.processedYData=processedYData;if(options.pointRange===null){series.pointRange=closestPointRange||1}
series.closestPointRange=closestPointRange;return!0};H.seriesTypes.coloredline.prototype.drawTracker=function(){var series=this,options=series.options,trackByArea=options.trackByArea,trackerPath=[].concat(trackByArea?series.areaPath:getPath(series.graphPath)),trackerPathLength=trackerPath.length,chart=series.chart,pointer=chart.pointer,renderer=chart.renderer,snap=chart.options.tooltip.snap,tracker=series.tracker,cursor=options.cursor,css=cursor&&{cursor:cursor},singlePoints=series.singlePoints,singlePoint,i,onMouseOver;onMouseOver=function(){if(chart.hoverSeries!==series){series.onMouseOver()}};if(trackerPathLength&&!trackByArea){i=trackerPathLength+1;while(i--){if(trackerPath[i]===M){trackerPath.splice(i+1,0,trackerPath[i+1]-snap,trackerPath[i+2],L)}
if((i&&trackerPath[i]===M)||i===trackerPathLength){trackerPath.splice(i,0,L,trackerPath[i-2]+snap,trackerPath[i-1])}}}
for(i=0;i<singlePoints.length;i++){singlePoint=singlePoints[i];if(singlePoint.plotX&&singlePoint.plotY){trackerPath.push(M,singlePoint.plotX-snap,singlePoint.plotY,L,singlePoint.plotX+snap,singlePoint.plotY)}}
if(tracker){tracker.attr({d:trackerPath})}else{series.tracker=renderer.path(trackerPath).attr({'stroke-linejoin':'round',visibility:series.visible?VISIBLE:HIDDEN,stroke:TRACKER_FILL,fill:trackByArea?TRACKER_FILL:NONE,'stroke-width':options.lineWidth+(trackByArea?0:2*snap),zIndex:2}).add(series.group);each([series.tracker,series.markerGroup],function(track){track.addClass(PREFIX+'tracker').on('mouseover',onMouseOver).on('mouseout',function(e){pointer.onTrackerMouseOut(e)}).css(css);if(hasTouch){track.on('touchstart',onMouseOver)}})}};H.seriesTypes.coloredline.prototype.setState=function(state){var series=this,options=series.options,graph=series.graph,stateOptions=options.states,lineWidth=options.lineWidth,attribs;state=state||NORMAL_STATE;if(series.state!==state){series.state=state;if(stateOptions[state]&&stateOptions[state].enabled===!1){return}
if(state){lineWidth=stateOptions[state].lineWidth||lineWidth+1}
if(graph&&!graph.dashstyle){attribs={'stroke-width':lineWidth};each(graph,function(seg){seg.attr(attribs)})}}};H.seriesTypes.coloredline.prototype.getSegments=function(){var series=this,lastColor=0,segments=[],i,points=series.points,pointsLength=points.length;if(pointsLength){if(series.options.connectNulls){for(i=pointsLength-1;i>=0;--i){if(points[i].y===null){points.splice(i,1)}}
pointsLength=points.length;each(points,function(point,j){if(j>0&&points[j].segmentColor!==points[j-1].segmentColor){segments.push({points:points.slice(lastColor,j+1),color:points[j-1].segmentColor});lastColor=j}});if(lastColor!==pointsLength-1){segments.push({points:points.slice(lastColor,pointsLength),color:points[pointsLength-1].segmentColor})}
if(points.length&&segments.length===0){segments=[points]}}else{var previousColor=null;each(points,function(point,j){var colorChanged=j>0&&(point.y===null||points[j-1].y===null||(point.segmentColor!==points[j-1].segmentColor&&points[j].segmentColor!==previousColor)),colorExists=points[j-1]&&points[j-1].segmentColor&&points[j-1].y!==null?!0:!1;if(!previousColor&&point.segmetColor){previousColor=point.segmentColor}
if(colorChanged){var p=points.slice(lastColor,j+1);if(p.length>0){each(p,function(pointObject,k){if(pointObject.y===null){p.splice(k,1)}});segments.push({points:p,color:colorExists?points[j-1].segmentColor:previousColor});lastColor=j}}else if(j===pointsLength-1){var next=j+1;if(point.y===null){next--}
p=points.slice(lastColor,next);if(p.length>0){each(p,function(pointObject,k){if(pointObject.y===null){p.splice(k,1)}});segments.push({points:p,color:colorExists?points[j-1].segmentColor:previousColor});lastColor=j}}
if(point){previousColor=point.segmentColor}})}}
series.segments=segments};H.seriesTypes.coloredline.prototype.getGraphPath=function(){var series=this,graphPath=[],segmentPath,singlePoints=[];each(series.segments,function(segment){segmentPath=series.getSegmentPath(segment.points);if(segment.points.length>1){graphPath.push([segmentPath,segment.color])}else{singlePoints.push(segment.points)}});series.singlePoints=singlePoints;series.graphPath=graphPath;return graphPath};H.seriesTypes.coloredline.prototype.drawGraph=function(){var series=this,options=series.options,props=[['graph',options.lineColor||series.color]],lineWidth=options.lineWidth,dashStyle=options.dashStyle,roundCap=options.linecap!=='square',graphPath=series.getGraphPath(),graphPathLength=graphPath.length,graphSegmentsLength=0;function getSegment(segment,prop,i){var attribs={stroke:prop[1],'stroke-width':lineWidth,zIndex:1},item;if(dashStyle){attribs.dashstyle=dashStyle}else if(roundCap){attribs['stroke-linecap']=attribs['stroke-linejoin']='round'}
if(segment[1]){attribs.stroke=segment[1]}
item=series.chart.renderer.path(segment[0]).attr(attribs).add(series.group).shadow(!i&&options.shadow);return item}
each(props,function(prop,i){var graphKey=prop[0],graph=series[graphKey],g;if(graph){each(graphPath,function(segment,j){if(series[graphKey][j]){series[graphKey][j].attr({d:segment[0],stroke:segment[1]})}else{series[graphKey][j]=getSegment(segment,prop,i)}})}else if(lineWidth&&graphPath.length){graph=[];each(graphPath,function(segment,j){graph[j]=getSegment(segment,prop,i)});series[graphKey]=graph;series[graphKey].destroy=function(){for(g in series[graphKey]){var el=series[graphKey][g];if(el&&el.destroy){el.destroy()}}}}
graphSegmentsLength=(series.graph&&series.graph.length)||-1;for(var j=graphSegmentsLength;j>=graphPathLength;j--){if(series[graphKey][j]){series[graphKey][j].destroy();series[graphKey].splice(j,1)}}})};H.wrap(seriesTypes.coloredline.prototype,'translate',function(proceed){proceed.apply(this,[].slice.call(arguments,1));if(this.getSegments){this.getSegments()}});seriesTypes.coloredarea=H.extendClass(seriesTypes.coloredline);H.seriesTypes.coloredarea.prototype.init=function(chart,options){options.threshold=options.threshold||null;H.Series.prototype.init.call(this,chart,options)};H.seriesTypes.coloredarea.prototype.closeSegment=function(path,segment,translatedThreshold){path.push(L,segment[segment.length-1].plotX,translatedThreshold,L,segment[0].plotX,translatedThreshold)};H.seriesTypes.coloredarea.prototype.drawGraph=function(f){H.seriesTypes.coloredline.prototype.drawGraph.call(this,f);var series=this,options=this.options,props=[['graph',options.lineColor||series.color]];each(props,function(prop){var graphKey=prop[0],graph=series[graphKey];if(graph){each(series.graphPath,function(segment,j){if(series[graphKey][j]){series[graphKey][j].attr({fill:segment[1]})}})}})};H.seriesTypes.coloredarea.prototype.getSegmentPath=function(segment){var segmentPath=H.Series.prototype.getSegmentPath.call(this,segment),areaSegmentPath=[].concat(segmentPath),i,options=this.options,segLength=segmentPath.length,translatedThreshold=this.yAxis.getThreshold(options.threshold),yBottom;if(segLength===3){areaSegmentPath.push(L,segmentPath[1],segmentPath[2])}
if(options.stacking&&!this.closedStacks){for(i=segment.length-1;i>=0;i--){yBottom=pick(segment[i].yBottom,translatedThreshold);if(i<segment.length-1&&options.step){areaSegmentPath.push(segment[i+1].plotX,yBottom)}
areaSegmentPath.push(segment[i].plotX,yBottom)}}else{this.closeSegment(areaSegmentPath,segment,translatedThreshold)}
return areaSegmentPath};H.seriesTypes.coloredarea.prototype.getGraphPath=function(){var series=this,graphPath=[],segmentPath,singlePoints=[];this.areaPath=[];each(series.segments,function(segment){segmentPath=series.getSegmentPath(segment.points);if(segment.points.length>1){graphPath.push([segmentPath,segment.color])}else{singlePoints.push(segment.points)}});series.singlePoints=singlePoints;series.graphPath=graphPath;return graphPath};H.seriesTypes.coloredarea.prototype.drawLegendSymbol=H.LegendSymbolMixin.drawRectangle}))