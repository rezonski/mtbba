<!-- 
Load Source directly form json
Use same source in different layers
 -->
<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>Highlight features under the mouse pointer, Using featuresAt and a filter to change hover styles</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.28.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.28.0/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>
<script src='//api.tiles.mapbox.com/mapbox.js/plugins/turf/v2.0.0/turf.min.js' charset='utf-8'></script>
<div id='map'></div>
<script>
    mapboxgl.accessToken = 'pk.eyJ1IjoibWVyc2FkcGFzaWMiLCJhIjoiY2lqenc1ZnpkMDA2N3ZrbHo4MzQ2Z2YzZyJ9.TIDhGaRGIYtw9_f_Yb3Ptg';
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v8',
        // center: [18.41811591, 43.86775491],
        center: [-90.548630, 14.616599],
        // pitch: 45,
        // bearing: 45,
        zoom: 11
    });

    var pt1 = turf.point([-75.343, 39.984, 788]);

    var trail = {
        "type": "FeatureCollection",
        "features": [
            {
                "type": "Feature",
                "properties": {
                    "name": "Hresa-sumbulovac-pale-trebevi"
                },
                "geometry": {
                    "type": "LineString",
                    "coordinates": [
                                    [
                                        18.41811591,
                                        43.86775491,
                                        585.79998
                                    ],
                                    [
                                        18.41449426,
                                        43.86659779,
                                        569.20001
                                    ],
                                    [
                                        18.41346337,
                                        43.86596311,
                                        561.40002
                                    ],
                                    [
                                        18.41313061,
                                        43.86509089,
                                        557.40002
                                    ],
                                    [
                                        18.41293003,
                                        43.8643988,
                                        553.20001
                                    ],
                                    [
                                        18.41260992,
                                        43.8633757,
                                        548.20001
                                    ],
                                    [
                                        18.41356404,
                                        43.86121451,
                                        541.79998
                                    ],
                                    [
                                        18.41421464,
                                        43.86084655,
                                        539.79998
                                    ],
                                    [
                                        18.41443181,
                                        43.86030407,
                                        537.79998
                                    ],
                                    [
                                        18.41478025,
                                        43.86019645,
                                        537
                                    ],
                                    [
                                        18.41474873,
                                        43.85952816,
                                        535.40002
                                    ],
                                    [
                                        18.41560176,
                                        43.85892919,
                                        530.20001
                                    ],
                                    [
                                        18.41715702,
                                        43.85900027,
                                        530.20001
                                    ],
                                    [
                                        18.41860298,
                                        43.85899733,
                                        530.59997
                                    ],
                                    [
                                        18.42051548,
                                        43.85887177,
                                        532.40002
                                    ],
                                    [
                                        18.42245254,
                                        43.85871922,
                                        533.40002
                                    ],
                                    [
                                        18.42369055,
                                        43.85880245,
                                        533.79998
                                    ],
                                    [
                                        18.42536794,
                                        43.8589452,
                                        536.20001
                                    ],
                                    [
                                        18.42700794,
                                        43.85857438,
                                        536.40002
                                    ],
                                    [
                                        18.43186114,
                                        43.8584334,
                                        539
                                    ],
                                    [
                                        18.43461041,
                                        43.85911116,
                                        540.79998
                                    ],
                                    [
                                        18.43680202,
                                        43.86028345,
                                        544.40002
                                    ],
                                    [
                                        18.43853515,
                                        43.8592078,
                                        546.40002
                                    ],
                                    [
                                        18.44061638,
                                        43.85836726,
                                        549
                                    ],
                                    [
                                        18.44355532,
                                        43.85816895,
                                        549.59997
                                    ],
                                    [
                                        18.44603486,
                                        43.8568514,
                                        552.79998
                                    ],
                                    [
                                        18.44815179,
                                        43.85699942,
                                        554.79998
                                    ],
                                    [
                                        18.44795943,
                                        43.85814204,
                                        557.20001
                                    ],
                                    [
                                        18.44700381,
                                        43.85908207,
                                        557.59997
                                    ],
                                    [
                                        18.44717153,
                                        43.85968314,
                                        560.79998
                                    ],
                                    [
                                        18.44710556,
                                        43.86014339,
                                        564.79998
                                    ],
                                    [
                                        18.44752256,
                                        43.86106867,
                                        565.59997
                                    ],
                                    [
                                        18.44830376,
                                        43.86215848,
                                        570
                                    ],
                                    [
                                        18.44946054,
                                        43.86256333,
                                        576.40002
                                    ],
                                    [
                                        18.4497498,
                                        43.86336078,
                                        586.20001
                                    ],
                                    [
                                        18.44999464,
                                        43.8638331,
                                        591.79998
                                    ],
                                    [
                                        18.45046067,
                                        43.86484086,
                                        601.79998
                                    ],
                                    [
                                        18.45115763,
                                        43.86565944,
                                        611.20001
                                    ],
                                    [
                                        18.45330968,
                                        43.86640735,
                                        627.59997
                                    ],
                                    [
                                        18.45247652,
                                        43.86656627,
                                        635.20001
                                    ],
                                    [
                                        18.45333424,
                                        43.86704002,
                                        644.40002
                                    ],
                                    [
                                        18.45273745,
                                        43.86699425,
                                        649.59997
                                    ],
                                    [
                                        18.4519472,
                                        43.86732157,
                                        657
                                    ],
                                    [
                                        18.45278648,
                                        43.86722794,
                                        662.40002
                                    ],
                                    [
                                        18.45231307,
                                        43.86735971,
                                        666.59997
                                    ],
                                    [
                                        18.45166859,
                                        43.86800654,
                                        674.79998
                                    ],
                                    [
                                        18.45032304,
                                        43.86805247,
                                        682.79998
                                    ],
                                    [
                                        18.45026537,
                                        43.8682186,
                                        686.40002
                                    ],
                                    [
                                        18.45144798,
                                        43.86849763,
                                        692.40002
                                    ],
                                    [
                                        18.45189079,
                                        43.86946566,
                                        701.59997
                                    ],
                                    [
                                        18.45378334,
                                        43.8710081,
                                        701.59997
                                    ],
                                    [
                                        18.4543482,
                                        43.87255975,
                                        703.40002
                                    ],
                                    [
                                        18.45487131,
                                        43.87296242,
                                        710
                                    ],
                                    [
                                        18.45502076,
                                        43.87255934,
                                        714.59997
                                    ],
                                    [
                                        18.45584454,
                                        43.87284197,
                                        723.20001
                                    ],
                                    [
                                        18.45664551,
                                        43.87296376,
                                        730.79998
                                    ],
                                    [
                                        18.45700828,
                                        43.87288061,
                                        736.59997
                                    ],
                                    [
                                        18.45788276,
                                        43.87252195,
                                        746.40002
                                    ],
                                    [
                                        18.45787287,
                                        43.87189515,
                                        751.79998
                                    ],
                                    [
                                        18.45826833,
                                        43.87287919,
                                        762.20001
                                    ],
                                    [
                                        18.4586938,
                                        43.8730791,
                                        772.79998
                                    ],
                                    [
                                        18.45889731,
                                        43.87257719,
                                        778.20001
                                    ],
                                    [
                                        18.45893234,
                                        43.8723171,
                                        783.40002
                                    ],
                                    [
                                        18.45949988,
                                        43.87249664,
                                        788.20001
                                    ],
                                    [
                                        18.45933769,
                                        43.8730832,
                                        794
                                    ],
                                    [
                                        18.45935521,
                                        43.87349467,
                                        800.79998
                                    ],
                                    [
                                        18.4600846,
                                        43.87286821,
                                        810.40002
                                    ],
                                    [
                                        18.46045098,
                                        43.87342787,
                                        816.59997
                                    ],
                                    [
                                        18.46127559,
                                        43.87382995,
                                        826.40002
                                    ],
                                    [
                                        18.46217011,
                                        43.87424091,
                                        836.40002
                                    ],
                                    [
                                        18.46405939,
                                        43.87392031,
                                        853
                                    ],
                                    [
                                        18.465545,
                                        43.87333827,
                                        865
                                    ],
                                    [
                                        18.4669752,
                                        43.87367882,
                                        875.40002
                                    ],
                                    [
                                        18.4679211,
                                        43.87429397,
                                        886.40002
                                    ],
                                    [
                                        18.46896423,
                                        43.87466328,
                                        897.40002
                                    ],
                                    [
                                        18.46969161,
                                        43.87489931,
                                        904.79998
                                    ],
                                    [
                                        18.47010827,
                                        43.87509419,
                                        914.40002
                                    ],
                                    [
                                        18.4725241,
                                        43.87504415,
                                        931.20001
                                    ],
                                    [
                                        18.47488889,
                                        43.87489353,
                                        932.79998
                                    ],
                                    [
                                        18.47628464,
                                        43.87522277,
                                        939.79998
                                    ],
                                    [
                                        18.47724756,
                                        43.87609273,
                                        951
                                    ],
                                    [
                                        18.47725477,
                                        43.87589533,
                                        957.40002
                                    ],
                                    [
                                        18.47873509,
                                        43.87646564,
                                        969.20001
                                    ],
                                    [
                                        18.48148972,
                                        43.87692949,
                                        986.20001
                                    ],
                                    [
                                        18.48316208,
                                        43.87691298,
                                        995
                                    ],
                                    [
                                        18.48511548,
                                        43.87734515,
                                        1009.2
                                    ],
                                    [
                                        18.48743802,
                                        43.87789978,
                                        1020.4
                                    ],
                                    [
                                        18.49007137,
                                        43.87830303,
                                        1035.4
                                    ],
                                    [
                                        18.49165295,
                                        43.87849322,
                                        1043.8
                                    ],
                                    [
                                        18.49367064,
                                        43.8789761,
                                        1057.4
                                    ],
                                    [
                                        18.49529304,
                                        43.87864393,
                                        1065.8
                                    ],
                                    [
                                        18.49704603,
                                        43.87812299,
                                        1078.8
                                    ],
                                    [
                                        18.49881629,
                                        43.87824168,
                                        1082.1999
                                    ],
                                    [
                                        18.50105904,
                                        43.87864376,
                                        1094.4
                                    ],
                                    [
                                        18.50227701,
                                        43.87872406,
                                        1102.4
                                    ],
                                    [
                                        18.50593035,
                                        43.87935304,
                                        1095.4
                                    ],
                                    [
                                        18.50668547,
                                        43.87995226,
                                        1089.8
                                    ],
                                    [
                                        18.50795466,
                                        43.88003876,
                                        1082.4
                                    ],
                                    [
                                        18.50874583,
                                        43.87962008,
                                        1075.8
                                    ],
                                    [
                                        18.50914212,
                                        43.87929663,
                                        1070.1999
                                    ],
                                    [
                                        18.51013563,
                                        43.87951447,
                                        1064.8
                                    ],
                                    [
                                        18.5119825,
                                        43.87879463,
                                        1054.1999
                                    ],
                                    [
                                        18.51613364,
                                        43.87788486,
                                        1055.5999
                                    ],
                                    [
                                        18.51979192,
                                        43.87769493,
                                        1082.5999
                                    ],
                                    [
                                        18.5220329,
                                        43.87784061,
                                        1085.5999
                                    ],
                                    [
                                        18.52402335,
                                        43.87873068,
                                        1089.4
                                    ],
                                    [
                                        18.52612713,
                                        43.87998268,
                                        1098
                                    ],
                                    [
                                        18.52924788,
                                        43.88144658,
                                        1102.5999
                                    ],
                                    [
                                        18.53148492,
                                        43.88364063,
                                        1102.8
                                    ],
                                    [
                                        18.53427819,
                                        43.88564944,
                                        1091.8
                                    ],
                                    [
                                        18.53582264,
                                        43.88678058,
                                        1087.8
                                    ],
                                    [
                                        18.53949484,
                                        43.88619518,
                                        1121.5999
                                    ],
                                    [
                                        18.54100442,
                                        43.88617138,
                                        1122.4
                                    ],
                                    [
                                        18.54383465,
                                        43.88547099,
                                        1116.5999
                                    ],
                                    [
                                        18.54607597,
                                        43.88502717,
                                        1100
                                    ],
                                    [
                                        18.54664796,
                                        43.8844494,
                                        1089.8
                                    ],
                                    [
                                        18.5485198,
                                        43.88510109,
                                        1080.1999
                                    ],
                                    [
                                        18.55134978,
                                        43.88520411,
                                        1062
                                    ],
                                    [
                                        18.55283732,
                                        43.88524266,
                                        1051.5999
                                    ],
                                    [
                                        18.55452795,
                                        43.88558775,
                                        1045.1999
                                    ],
                                    [
                                        18.55748869,
                                        43.8859796,
                                        1029.4
                                    ],
                                    [
                                        18.55919851,
                                        43.88575203,
                                        1019.7999
                                    ],
                                    [
                                        18.56002422,
                                        43.88553989,
                                        1013.2
                                    ],
                                    [
                                        18.56085654,
                                        43.88462257,
                                        1005.5999
                                    ],
                                    [
                                        18.56191274,
                                        43.88320905,
                                        992
                                    ],
                                    [
                                        18.56387092,
                                        43.88101944,
                                        980.20001
                                    ],
                                    [
                                        18.56831048,
                                        43.8803535,
                                        970.59997
                                    ],
                                    [
                                        18.57052909,
                                        43.87873521,
                                        952.40002
                                    ],
                                    [
                                        18.57224151,
                                        43.87759116,
                                        935.40002
                                    ],
                                    [
                                        18.57619123,
                                        43.87707718,
                                        906
                                    ],
                                    [
                                        18.57771573,
                                        43.87659329,
                                        888.79998
                                    ],
                                    [
                                        18.57873095,
                                        43.87511682,
                                        883.79998
                                    ],
                                    [
                                        18.57992696,
                                        43.87467878,
                                        879.79998
                                    ],
                                    [
                                        18.58098601,
                                        43.87426706,
                                        880
                                    ],
                                    [
                                        18.58390619,
                                        43.87288103,
                                        879
                                    ],
                                    [
                                        18.58475594,
                                        43.8720156,
                                        878.59997
                                    ],
                                    [
                                        18.58495954,
                                        43.87216874,
                                        879
                                    ],
                                    [
                                        18.58437423,
                                        43.87154865,
                                        878.79998
                                    ],
                                    [
                                        18.58514503,
                                        43.87003764,
                                        879
                                    ],
                                    [
                                        18.58656669,
                                        43.86798583,
                                        881.79998
                                    ],
                                    [
                                        18.58764862,
                                        43.86675822,
                                        885.20001
                                    ],
                                    [
                                        18.58689065,
                                        43.86547269,
                                        894.59997
                                    ],
                                    [
                                        18.58757914,
                                        43.86395313,
                                        903.20001
                                    ],
                                    [
                                        18.58797174,
                                        43.86359062,
                                        908.40002
                                    ],
                                    [
                                        18.58919098,
                                        43.86323514,
                                        919.40002
                                    ],
                                    [
                                        18.58941142,
                                        43.86254145,
                                        929.20001
                                    ],
                                    [
                                        18.59037618,
                                        43.86181667,
                                        945
                                    ],
                                    [
                                        18.59193102,
                                        43.86210216,
                                        945.20001
                                    ],
                                    [
                                        18.59223394,
                                        43.86191826,
                                        943.40002
                                    ],
                                    [
                                        18.59276418,
                                        43.86140671,
                                        941.79998
                                    ],
                                    [
                                        18.59370974,
                                        43.85998154,
                                        928
                                    ],
                                    [
                                        18.59491607,
                                        43.85943897,
                                        922.59997
                                    ],
                                    [
                                        18.59589457,
                                        43.8584821,
                                        930
                                    ],
                                    [
                                        18.59666042,
                                        43.85759403,
                                        940
                                    ],
                                    [
                                        18.5980043,
                                        43.85682458,
                                        943.79998
                                    ],
                                    [
                                        18.5991677,
                                        43.85563326,
                                        955
                                    ],
                                    [
                                        18.60033597,
                                        43.85491367,
                                        950
                                    ],
                                    [
                                        18.60143451,
                                        43.85403525,
                                        953.59997
                                    ],
                                    [
                                        18.60149787,
                                        43.85396433,
                                        956.59997
                                    ],
                                    [
                                        18.60305313,
                                        43.85327895,
                                        966.79998
                                    ],
                                    [
                                        18.60418427,
                                        43.85267428,
                                        974.20001
                                    ],
                                    [
                                        18.60530602,
                                        43.84990481,
                                        1010
                                    ],
                                    [
                                        18.60595168,
                                        43.84910996,
                                        1005.4
                                    ],
                                    [
                                        18.60601773,
                                        43.8480478,
                                        1005
                                    ],
                                    [
                                        18.61022687,
                                        43.84565887,
                                        1043.4
                                    ],
                                    [
                                        18.61075317,
                                        43.84408693,
                                        1061.5999
                                    ],
                                    [
                                        18.61169228,
                                        43.8424139,
                                        1059.1999
                                    ],
                                    [
                                        18.61040004,
                                        43.84058078,
                                        1054.4
                                    ],
                                    [
                                        18.60985815,
                                        43.83933959,
                                        1049.4
                                    ],
                                    [
                                        18.61166596,
                                        43.83869393,
                                        1041.8
                                    ],
                                    [
                                        18.61284915,
                                        43.83799991,
                                        1037.4
                                    ],
                                    [
                                        18.61307471,
                                        43.83662142,
                                        1043
                                    ],
                                    [
                                        18.61327369,
                                        43.83609169,
                                        1045.8
                                    ],
                                    [
                                        18.6135332,
                                        43.83527311,
                                        1046.1999
                                    ],
                                    [
                                        18.61404424,
                                        43.83403737,
                                        1033.1999
                                    ],
                                    [
                                        18.61402706,
                                        43.83279626,
                                        1020
                                    ],
                                    [
                                        18.614477,
                                        43.83234917,
                                        1012.4
                                    ],
                                    [
                                        18.61373201,
                                        43.83180719,
                                        1013.2
                                    ],
                                    [
                                        18.61197852,
                                        43.83173603,
                                        1016.4
                                    ],
                                    [
                                        18.61102349,
                                        43.8305779,
                                        1011.5999
                                    ],
                                    [
                                        18.60947786,
                                        43.83011883,
                                        1011.4
                                    ],
                                    [
                                        18.60806669,
                                        43.82858385,
                                        1013.2
                                    ],
                                    [
                                        18.60740418,
                                        43.8276413,
                                        1010.2
                                    ],
                                    [
                                        18.6076294,
                                        43.82650614,
                                        1011.7999
                                    ],
                                    [
                                        18.60663766,
                                        43.82506538,
                                        995.79998
                                    ],
                                    [
                                        18.60700285,
                                        43.82500905,
                                        993.20001
                                    ],
                                    [
                                        18.60820474,
                                        43.82560106,
                                        983.79998
                                    ],
                                    [
                                        18.60791883,
                                        43.82464905,
                                        973.40002
                                    ],
                                    [
                                        18.60754106,
                                        43.82403717,
                                        970
                                    ],
                                    [
                                        18.60783719,
                                        43.82312354,
                                        959
                                    ],
                                    [
                                        18.60936831,
                                        43.82213397,
                                        946.79998
                                    ],
                                    [
                                        18.61093053,
                                        43.82151095,
                                        933.79998
                                    ],
                                    [
                                        18.6109369,
                                        43.82089144,
                                        928.40002
                                    ],
                                    [
                                        18.61073783,
                                        43.81936702,
                                        915.20001
                                    ],
                                    [
                                        18.61133102,
                                        43.8183612,
                                        902.79998
                                    ],
                                    [
                                        18.61164459,
                                        43.817192,
                                        889.59997
                                    ],
                                    [
                                        18.61017423,
                                        43.81649396,
                                        888
                                    ],
                                    [
                                        18.60815528,
                                        43.81518462,
                                        888.40002
                                    ],
                                    [
                                        18.60648326,
                                        43.8134701,
                                        887.59997
                                    ],
                                    [
                                        18.60439709,
                                        43.81155593,
                                        880.40002
                                    ],
                                    [
                                        18.6035563,
                                        43.81092586,
                                        876
                                    ],
                                    [
                                        18.60165143,
                                        43.81043208,
                                        876.59997
                                    ],
                                    [
                                        18.59889169,
                                        43.81033192,
                                        874.20001
                                    ],
                                    [
                                        18.59652665,
                                        43.81047869,
                                        873.59997
                                    ],
                                    [
                                        18.59526241,
                                        43.81052495,
                                        872.79998
                                    ],
                                    [
                                        18.59216144,
                                        43.81088051,
                                        869.40002
                                    ],
                                    [
                                        18.58973002,
                                        43.81070827,
                                        866.40002
                                    ],
                                    [
                                        18.58655688,
                                        43.81117916,
                                        866.79998
                                    ],
                                    [
                                        18.58363864,
                                        43.81205826,
                                        863.79998
                                    ],
                                    [
                                        18.58187902,
                                        43.81181593,
                                        861.59997
                                    ],
                                    [
                                        18.57762588,
                                        43.81328444,
                                        854.79998
                                    ],
                                    [
                                        18.57567289,
                                        43.81375651,
                                        855
                                    ],
                                    [
                                        18.57313117,
                                        43.81077532,
                                        857
                                    ],
                                    [
                                        18.57161815,
                                        43.81185131,
                                        859.59997
                                    ],
                                    [
                                        18.56687894,
                                        43.81283274,
                                        863
                                    ],
                                    [
                                        18.5633572,
                                        43.81428021,
                                        859.40002
                                    ],
                                    [
                                        18.56146532,
                                        43.81550397,
                                        853.59997
                                    ],
                                    [
                                        18.55918418,
                                        43.81590949,
                                        848.40002
                                    ],
                                    [
                                        18.55770452,
                                        43.81356339,
                                        854.59997
                                    ],
                                    [
                                        18.55796311,
                                        43.81269067,
                                        864.20001
                                    ],
                                    [
                                        18.55788582,
                                        43.81183681,
                                        873.79998
                                    ],
                                    [
                                        18.55745893,
                                        43.8109153,
                                        885.79998
                                    ],
                                    [
                                        18.55740202,
                                        43.80986664,
                                        895.59997
                                    ],
                                    [
                                        18.5566878,
                                        43.80940471,
                                        901.40002
                                    ],
                                    [
                                        18.55454128,
                                        43.80792497,
                                        911.40002
                                    ],
                                    [
                                        18.55365363,
                                        43.80637398,
                                        923.79998
                                    ],
                                    [
                                        18.55296556,
                                        43.80473675,
                                        935.59997
                                    ],
                                    [
                                        18.55174583,
                                        43.80386612,
                                        944.20001
                                    ],
                                    [
                                        18.54992503,
                                        43.80369613,
                                        953.59997
                                    ],
                                    [
                                        18.54867344,
                                        43.80333068,
                                        960.20001
                                    ],
                                    [
                                        18.54829601,
                                        43.80247531,
                                        966.20001
                                    ],
                                    [
                                        18.5479101,
                                        43.80321853,
                                        972
                                    ],
                                    [
                                        18.54653363,
                                        43.80389093,
                                        968
                                    ],
                                    [
                                        18.54681266,
                                        43.80349162,
                                        967.79998
                                    ],
                                    [
                                        18.54704207,
                                        43.80300069,
                                        963.20001
                                    ],
                                    [
                                        18.54558496,
                                        43.8021884,
                                        954.59997
                                    ],
                                    [
                                        18.54555697,
                                        43.80168984,
                                        949.40002
                                    ],
                                    [
                                        18.54396021,
                                        43.80133328,
                                        942
                                    ],
                                    [
                                        18.54316879,
                                        43.80120537,
                                        936.59997
                                    ],
                                    [
                                        18.54228601,
                                        43.80129111,
                                        931.79998
                                    ],
                                    [
                                        18.5414267,
                                        43.80126966,
                                        929
                                    ],
                                    [
                                        18.54071801,
                                        43.80055703,
                                        922
                                    ],
                                    [
                                        18.54076386,
                                        43.79992688,
                                        916
                                    ],
                                    [
                                        18.54040117,
                                        43.79921542,
                                        910.40002
                                    ],
                                    [
                                        18.54011627,
                                        43.7985214,
                                        903.20001
                                    ],
                                    [
                                        18.53947372,
                                        43.79885139,
                                        902.20001
                                    ],
                                    [
                                        18.53887525,
                                        43.80044421,
                                        907.40002
                                    ],
                                    [
                                        18.53719484,
                                        43.80144492,
                                        912.79998
                                    ],
                                    [
                                        18.53633989,
                                        43.80181934,
                                        916.79998
                                    ],
                                    [
                                        18.53498521,
                                        43.80190073,
                                        922.40002
                                    ],
                                    [
                                        18.53393395,
                                        43.8023837,
                                        929
                                    ],
                                    [
                                        18.53341938,
                                        43.80280824,
                                        935.20001
                                    ],
                                    [
                                        18.53250173,
                                        43.80298887,
                                        939.79998
                                    ],
                                    [
                                        18.53187728,
                                        43.80225621,
                                        935
                                    ],
                                    [
                                        18.5316006,
                                        43.80102306,
                                        936.59997
                                    ],
                                    [
                                        18.5309106,
                                        43.80084084,
                                        941.59997
                                    ],
                                    [
                                        18.52975012,
                                        43.80150661,
                                        951.40002
                                    ],
                                    [
                                        18.5275974,
                                        43.8018232,
                                        950.20001
                                    ],
                                    [
                                        18.52663088,
                                        43.80213157,
                                        948.40002
                                    ],
                                    [
                                        18.52501678,
                                        43.8029711,
                                        948.20001
                                    ],
                                    [
                                        18.52355095,
                                        43.80351894,
                                        940.79998
                                    ],
                                    [
                                        18.52226533,
                                        43.80427189,
                                        949.59997
                                    ],
                                    [
                                        18.52128448,
                                        43.80450725,
                                        949.79998
                                    ],
                                    [
                                        18.51940819,
                                        43.80423828,
                                        954.59997
                                    ],
                                    [
                                        18.51802074,
                                        43.80441446,
                                        954
                                    ],
                                    [
                                        18.51836758,
                                        43.80507697,
                                        960.20001
                                    ],
                                    [
                                        18.51710854,
                                        43.80547083,
                                        968.59997
                                    ],
                                    [
                                        18.51575477,
                                        43.80597383,
                                        962.40002
                                    ],
                                    [
                                        18.51427193,
                                        43.80586244,
                                        961.20001
                                    ],
                                    [
                                        18.51265439,
                                        43.8075674,
                                        955.40002
                                    ],
                                    [
                                        18.51168301,
                                        43.80802338,
                                        952.20001
                                    ],
                                    [
                                        18.5109817,
                                        43.80860684,
                                        950.40002
                                    ],
                                    [
                                        18.50957748,
                                        43.80914571,
                                        944.40002
                                    ],
                                    [
                                        18.50821391,
                                        43.8100259,
                                        945
                                    ],
                                    [
                                        18.50740254,
                                        43.81140011,
                                        956.40002
                                    ],
                                    [
                                        18.50712351,
                                        43.81239932,
                                        965.79998
                                    ],
                                    [
                                        18.50563312,
                                        43.81291237,
                                        975.20001
                                    ],
                                    [
                                        18.50450299,
                                        43.81326408,
                                        978.59997
                                    ],
                                    [
                                        18.50349339,
                                        43.81350422,
                                        987.20001
                                    ],
                                    [
                                        18.50305007,
                                        43.81373405,
                                        991.79998
                                    ],
                                    [
                                        18.50229017,
                                        43.81448054,
                                        996.79998
                                    ],
                                    [
                                        18.50044263,
                                        43.81651081,
                                        1021.5999
                                    ],
                                    [
                                        18.499241,
                                        43.81686871,
                                        1026.8
                                    ],
                                    [
                                        18.49711334,
                                        43.81730977,
                                        1040.4
                                    ],
                                    [
                                        18.49608949,
                                        43.81759065,
                                        1044.8
                                    ],
                                    [
                                        18.49400172,
                                        43.81918522,
                                        1065
                                    ],
                                    [
                                        18.49130309,
                                        43.81930902,
                                        1082.5999
                                    ],
                                    [
                                        18.48918054,
                                        43.81808233,
                                        1100.4
                                    ],
                                    [
                                        18.48831821,
                                        43.81731656,
                                        1099.5999
                                    ],
                                    [
                                        18.48748664,
                                        43.81684474,
                                        1099.4
                                    ],
                                    [
                                        18.48658508,
                                        43.8168745,
                                        1096.8
                                    ],
                                    [
                                        18.4858613,
                                        43.81704004,
                                        1099.5999
                                    ],
                                    [
                                        18.48413589,
                                        43.81715194,
                                        1104.8
                                    ],
                                    [
                                        18.48303392,
                                        43.81662379,
                                        1113.8
                                    ],
                                    [
                                        18.48161721,
                                        43.81658205,
                                        1109.4
                                    ],
                                    [
                                        18.48013496,
                                        43.81750959,
                                        1108.5999
                                    ],
                                    [
                                        18.47883903,
                                        43.817983,
                                        1095.4
                                    ],
                                    [
                                        18.47825104,
                                        43.81843412,
                                        1090
                                    ],
                                    [
                                        18.47785986,
                                        43.81915563,
                                        1084
                                    ],
                                    [
                                        18.47744872,
                                        43.8201374,
                                        1082.5999
                                    ],
                                    [
                                        18.47781736,
                                        43.82128162,
                                        1080.5999
                                    ],
                                    [
                                        18.47727178,
                                        43.82265843,
                                        1074.4
                                    ],
                                    [
                                        18.47713164,
                                        43.82429692,
                                        1078.5999
                                    ],
                                    [
                                        18.47597694,
                                        43.82458023,
                                        1088.8
                                    ],
                                    [
                                        18.4743206,
                                        43.82526629,
                                        1108.8
                                    ],
                                    [
                                        18.47358911,
                                        43.8257656,
                                        1117.1999
                                    ],
                                    [
                                        18.47291428,
                                        43.82630581,
                                        1125
                                    ],
                                    [
                                        18.47284018,
                                        43.82700361,
                                        1131.8
                                    ],
                                    [
                                        18.47201406,
                                        43.82780735,
                                        1146.4
                                    ],
                                    [
                                        18.47167024,
                                        43.82834924,
                                        1151.1999
                                    ],
                                    [
                                        18.47180334,
                                        43.82911107,
                                        1153.8
                                    ],
                                    [
                                        18.47266056,
                                        43.82977316,
                                        1165.5999
                                    ],
                                    [
                                        18.47303691,
                                        43.83062459,
                                        1172.4
                                    ],
                                    [
                                        18.47261236,
                                        43.83032351,
                                        1175
                                    ],
                                    [
                                        18.47107931,
                                        43.83069056,
                                        1180
                                    ],
                                    [
                                        18.4712348,
                                        43.83051328,
                                        1180.5999
                                    ],
                                    [
                                        18.47224792,
                                        43.83012386,
                                        1177.4
                                    ],
                                    [
                                        18.47289953,
                                        43.83075099,
                                        1175.5999
                                    ],
                                    [
                                        18.47163554,
                                        43.83175279,
                                        1171.4
                                    ],
                                    [
                                        18.46927637,
                                        43.83315626,
                                        1167.5999
                                    ],
                                    [
                                        18.46691242,
                                        43.83371592,
                                        1159
                                    ],
                                    [
                                        18.46490772,
                                        43.83435755,
                                        1158.8
                                    ],
                                    [
                                        18.46295306,
                                        43.83550864,
                                        1144.5999
                                    ],
                                    [
                                        18.46234001,
                                        43.83664196,
                                        1130.1999
                                    ],
                                    [
                                        18.46214136,
                                        43.83548593,
                                        1126
                                    ],
                                    [
                                        18.46181974,
                                        43.83573998,
                                        1118.1999
                                    ],
                                    [
                                        18.46096613,
                                        43.83650994,
                                        1114.5999
                                    ],
                                    [
                                        18.457982,
                                        43.83736758,
                                        1103
                                    ],
                                    [
                                        18.45322561,
                                        43.83779372,
                                        1092.5999
                                    ],
                                    [
                                        18.45202549,
                                        43.83730933,
                                        1090
                                    ],
                                    [
                                        18.4491427,
                                        43.83663291,
                                        1088.1999
                                    ],
                                    [
                                        18.44583126,
                                        43.83680013,
                                        1078.1999
                                    ],
                                    [
                                        18.44439117,
                                        43.8369448,
                                        1071.8
                                    ],
                                    [
                                        18.44260163,
                                        43.83674195,
                                        1060.4
                                    ],
                                    [
                                        18.43790492,
                                        43.83814316,
                                        1027.1999
                                    ],
                                    [
                                        18.43608261,
                                        43.83888764,
                                        1010
                                    ],
                                    [
                                        18.434512,
                                        43.83862671,
                                        1000.5999
                                    ],
                                    [
                                        18.43380977,
                                        43.83900222,
                                        995.59997
                                    ],
                                    [
                                        18.43379669,
                                        43.83998005,
                                        987.79998
                                    ],
                                    [
                                        18.43309731,
                                        43.84117615,
                                        973.79998
                                    ],
                                    [
                                        18.43169149,
                                        43.84168032,
                                        961.20001
                                    ],
                                    [
                                        18.42993314,
                                        43.84144663,
                                        949.79998
                                    ],
                                    [
                                        18.42601292,
                                        43.84257643,
                                        920.20001
                                    ],
                                    [
                                        18.42447048,
                                        43.84390396,
                                        900.40002
                                    ],
                                    [
                                        18.42326684,
                                        43.84432397,
                                        885.79998
                                    ],
                                    [
                                        18.42167487,
                                        43.84451684,
                                        872.59997
                                    ],
                                    [
                                        18.42000016,
                                        43.84474852,
                                        860.59997
                                    ],
                                    [
                                        18.41890716,
                                        43.84406941,
                                        853
                                    ],
                                    [
                                        18.41651757,
                                        43.84337833,
                                        840.59997
                                    ],
                                    [
                                        18.41561886,
                                        43.84241977,
                                        829.79998
                                    ],
                                    [
                                        18.41432293,
                                        43.84118235,
                                        816.79998
                                    ],
                                    [
                                        18.4136963,
                                        43.84006119,
                                        811.40002
                                    ],
                                    [
                                        18.41382044,
                                        43.83839436,
                                        804.40002
                                    ],
                                    [
                                        18.41450407,
                                        43.83761661,
                                        798.79998
                                    ],
                                    [
                                        18.41581659,
                                        43.83653853,
                                        787.59997
                                    ],
                                    [
                                        18.417757,
                                        43.83526381,
                                        769.79998
                                    ],
                                    [
                                        18.41725442,
                                        43.83518535,
                                        768
                                    ],
                                    [
                                        18.41542918,
                                        43.83617106,
                                        760.40002
                                    ],
                                    [
                                        18.41404968,
                                        43.83680339,
                                        752.40002
                                    ],
                                    [
                                        18.41273825,
                                        43.83706784,
                                        744.20001
                                    ],
                                    [
                                        18.41191205,
                                        43.83818591,
                                        732.59997
                                    ],
                                    [
                                        18.40979796,
                                        43.83894053,
                                        723.59997
                                    ],
                                    [
                                        18.40846675,
                                        43.8393561,
                                        716.59997
                                    ],
                                    [
                                        18.40840958,
                                        43.8398959,
                                        711.59997
                                    ],
                                    [
                                        18.40901593,
                                        43.84099661,
                                        703
                                    ],
                                    [
                                        18.40868669,
                                        43.8422228,
                                        698.59997
                                    ],
                                    [
                                        18.40740728,
                                        43.84227493,
                                        697.20001
                                    ],
                                    [
                                        18.40636314,
                                        43.84263108,
                                        694
                                    ],
                                    [
                                        18.40466832,
                                        43.84383564,
                                        680.59997
                                    ],
                                    [
                                        18.40455274,
                                        43.84459286,
                                        669.79998
                                    ],
                                    [
                                        18.40520258,
                                        43.845177,
                                        666.79998
                                    ],
                                    [
                                        18.40536159,
                                        43.84631258,
                                        654.59997
                                    ],
                                    [
                                        18.40656146,
                                        43.84708095,
                                        650.20001
                                    ],
                                    [
                                        18.40575847,
                                        43.84776894,
                                        643.40002
                                    ],
                                    [
                                        18.4057516,
                                        43.84863847,
                                        638.20001
                                    ],
                                    [
                                        18.40501978,
                                        43.84839205,
                                        633.20001
                                    ],
                                    [
                                        18.40398293,
                                        43.8486466,
                                        623.59997
                                    ],
                                    [
                                        18.40320568,
                                        43.84824411,
                                        616
                                    ],
                                    [
                                        18.40278449,
                                        43.84840026,
                                        610
                                    ],
                                    [
                                        18.40342445,
                                        43.84965922,
                                        597.59997
                                    ],
                                    [
                                        18.40434302,
                                        43.85074426,
                                        587.20001
                                    ],
                                    [
                                        18.4058324,
                                        43.85195486,
                                        572.59997
                                    ],
                                    [
                                        18.40612627,
                                        43.85288382,
                                        565.40002
                                    ],
                                    [
                                        18.40643481,
                                        43.85346553,
                                        564
                                    ],
                                    [
                                        18.41117192,
                                        43.85552194,
                                        565.40002
                                    ],
                                    [
                                        18.41061947,
                                        43.85692122,
                                        568
                                    ],
                                    [
                                        18.41201003,
                                        43.85792235,
                                        570.20001
                                    ],
                                    [
                                        18.41195714,
                                        43.85870631,
                                        570.79998
                                    ],
                                    [
                                        18.4119045,
                                        43.86023567,
                                        573.20001
                                    ],
                                    [
                                        18.41178456,
                                        43.86214541,
                                        577.40002
                                    ],
                                    [
                                        18.41237473,
                                        43.86342432,
                                        582.20001
                                    ],
                                    [
                                        18.41284546,
                                        43.86375398,
                                        586.59997
                                    ],
                                    [
                                        18.41308551,
                                        43.86456769,
                                        590.40002
                                    ],
                                    [
                                        18.41353327,
                                        43.86590486,
                                        598.59997
                                    ],
                                    [
                                        18.41434246,
                                        43.86661531,
                                        603.79998
                                    ],
                                    [
                                        18.4152281,
                                        43.8668205,
                                        608
                                    ],
                                    [
                                        18.41606503,
                                        43.86696978,
                                        611.20001
                                    ],
                                    [
                                        18.41787183,
                                        43.86766389,
                                        621.59997
                                    ]
                                ]
                            }
                        }
                    ]
                };
    
    var poligon = {
      'type': 'FeatureCollection',
      'features': []
    };

    map.on('load', function () {
        map.addSource('trail', {
            'type': 'geojson',
            'data': trail
        });

        map.addLayer({
            'id': 'trail',
            'source': 'trail',
            'type': 'line',
            'paint': {
                'line-width': 5,
                'line-opacity': 0.5,
                'line-color': '#0046FA'
            }
        });

        // var points = trail.features[0].geometry.coordinates;
        // for (var i = 1; i < points.length; i++) {
        //     var jedanSegment = {
        //         "type": "Feature",
        //         "properties": {
        //             "visina": 0,
        //             "boja": '#CC0000'
        //         },
        //         "geometry": {
        //             "type": "Polygon",
        //             "coordinates": []
        //         }
        //     };
        //     var linija = [[points[i-1][0],points[i-1][1]], [points[i][0],points[i][1]]]
        //     jedanSegment.properties.visina = (points[i][2] - 500) * 8;
        //     if (points[i][2] > 1000) {
        //         jedanSegment.properties.boja =  '#00CC00';  
        //     }
        //     if (points[i][2] > 1100) {
        //         jedanSegment.properties.boja =  '#0000CC';  
        //     }
        //     jedanSegment.geometry.coordinates = [getRect(linija)];
        //     poligon.features.push(jedanSegment);
        // }

        // map.addSource('poligon', {
        //     'type': 'geojson',
        //     'data': poligon
        // });

        // map.addLayer({
        //     'id': 'room-extrusion',
        //     'type': 'fill-extrusion',
        //     'source': 'poligon',
        //     'paint': {
        //         'fill-extrusion-color': {
        //             'property': 'boja',
        //             'type': 'identity'
        //         },
        //         'fill-extrusion-height': {
        //             'property': 'visina',
        //             'type': 'identity'
        //         },
        //         'fill-extrusion-opacity': 0.5
        //     }
        // });
        
        var curved = turf.bezier(trail.features[0]);

        var pt = {
            "type": "Feature",
            "properties": {},
            "geometry": {
                "type": "Point",
                "coordinates": [-90.548630, 14.616599]
            }
        };
        var unit = 'miles';
        var buffered = turf.buffer(pt, 10, unit);

        var curvedResult = {
            "type": "FeatureCollection",
            "features": [curved]
        };

        map.addSource('curvedResult', {
            'type': 'geojson',
            'data': curvedResult
        });

        map.addLayer({
            'id': 'curvedResult',
            'source': 'curvedResult',
            'type': 'line',
            'paint': {
                'line-width': 6,
                'line-opacity': 0.5,
                'line-color': '#FF3F00'
            }
        });
        
        map.addSource('bufferedResult', {
            'type': 'geojson',
            'data': buffered
        });

        map.addLayer({
            'id': 'bufferedResult',
            'source': 'bufferedResult',
            'type': 'fill',
            'paint': {
                'fill-color': '#FF3F00',
                'fill-opacity': 0.5
            }
        });
    });

    function getRect(line) {
        var A = line[0];
        var B = line[1];
        var C = [line[0][0],line[1][1]];
        var d = 0.0008;
        var AB = turf.distance(turf.point(A), turf.point(B));
        var AC = turf.distance(turf.point(A), turf.point(C));
        var alfa = Math.acos(AC/AB);
        var sin = Math.sin(alfa);
        var cos = Math.cos(alfa);
        var P1 = [];
        var P2 = [];
        var P3 = [];
        var P4 = [];
        P1.push(B[0] + d/2 * cos);
        P1.push(B[1] - d/2 * sin);
        P2.push(B[0] - d/2 * cos);
        P2.push(B[1] + d/2 * sin);
        P3.push(A[0] - d/2 * cos);
        P3.push(A[1] + d/2 * sin);
        P4.push(A[0] + d/2 * cos);
        P4.push(A[1] - d/2 * sin);
        return [P1,P2,P3,P4,P1];
    }
</script>

</body>
</html>
