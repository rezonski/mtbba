<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
</head>
<body>
<script src='//api.tiles.mapbox.com/mapbox.js/plugins/turf/v2.0.0/turf.min.js' charset='utf-8'></script>
<script src='data/hresaSumbulovac.js' charset='utf-8'></script>
<script src='js/polyline.js'></script>
<div id='map'></div>
<script>
    var baseURL = 'https://api.mapbox.com/v4/mapbox.streets/';
    var token = 'pk.eyJ1IjoibWVyc2FkcGFzaWMiLCJhIjoiY2lqenc1ZnpkMDA2N3ZrbHo4MzQ2Z2YzZyJ9.TIDhGaRGIYtw9_f_Yb3Ptg';
    var centroidPt = turf.centroid(hresa);
    var coordinates = centroidPt.geometry.coordinates[0] + ',' + centroidPt.geometry.coordinates[1];
    var simplified = turf.simplify(hresa.features[0], 0.001, false);
    // simplified = polyline.decode('kumwFrjvbMaf%40kuD%7BnCkS');
    console.log(simplified);
    simplified.geometry.coordinates = simplified.geometry.coordinates.map(function(point) {
        return [Math.round(point[0] * 10000) / 10000, Math.round(point[1] * 10000) / 10000];
    });
    var poly = polyline.fromGeoJSON(simplified);
    var poly = JSON.stringify(simplified.geometry.coordinates);
    // console.log(poly);
    // poly = 'kumwFrjvbMaf%40kuD%7BnCkS';
    // console.log(poly);
    // var url = baseURL + '-5+003300-1+0000ff-0(' + poly + ')/' + coordinates + ',12/500x300.png?access_token=' + token;
    simplified.properties.stroke = '#CC0000';
    simplified.properties['stroke-width'] = 4;
    simplified.properties['stroke-opacity'] = 0.6;

    var geo = encodeURIComponent(JSON.stringify(turf.featurecollection([simplified])));
    var url = baseURL + 'geojson(' + geo + ')/' + coordinates + ',7/500x300.png?access_token=' + token;
    console.log(url);
    // window.location = url;
</script>
</body>
</html>